﻿
@model test2.Data.Order

@{
    Layout = "Layout_Doctor";

    var appointment = Model;

    if (appointment == null)
    {
        <h2>Appointment not found</h2>
    }
    else
    {
        <!-- Render dữ liệu cuộc hẹn -->
        <div class="container mx-auto mt-10 pt-10 bg-white rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold text-blue-500 mb-4">Appointment Details</h2>
            <div class="flex items-center mb-2">
                @if (appointment.PidNavigation != null && !string.IsNullOrEmpty(appointment.PidNavigation.PatientImg))
                {
                    <img class="w-24 h-24 rounded mb-3" src="@appointment.PidNavigation.PatientImg" alt="Patient avatar">
                }
                else
                {
                    <img class="w-24 h-24 rounded mb-3" src="https://cellphones.com.vn/sforum/wp-content/uploads/2023/10/avatar-trang-4.jpg" alt="Default avatar">
                }

                <div class="bg-gray-100 p-4 ml-3 rounded-lg">
                    <h3 class="font-semibold text-gray-700">Patient Information</h3>
                    <p><strong>Name:</strong> @(appointment.PidNavigation != null ? appointment.PidNavigation.Name : "Unknown")</p>
                    <p><strong>Phone:</strong> @(appointment.PidNavigation != null ? appointment.PidNavigation.Phone : "Unknown")</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Patient Information -->
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-700">Specialty : </h3>
                    <p>
                        <strong>
                            @if (appointment.Option != null && appointment.Option.DidNavigation != null && appointment.Option.DidNavigation.Specialty != null)
                            {
                                @appointment.Option.DidNavigation.Specialty.SpecialtyName
                            }
                            else
                            {
                                <span>Specialty not available</span>
                            }
                        </strong>
                    </p>

                    <h3 class="font-semibold text-gray-700 mt-2">Price : </h3>
                    <p>
                        <strong>
                            @if (appointment.Option != null && appointment.Option.DidNavigation != null && appointment.Option.DidNavigation.Price.HasValue)
                            {
                                @appointment.Option.DidNavigation.Price.Value.ToString("C")
                            }
                            else
                            {
                                <span>Price not available</span>
                            }
                        </strong>
                    </p>
                </div>

                <!-- Appointment Information -->
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-semibold text-gray-700">Appointment Information</h3>
                    <p><strong>Date:</strong> @appointment.DateOrder?.ToString("MM/dd/yyyy")</p>
                    <p><strong>Time:</strong> @appointment.DateOrder?.ToString("hh:mm tt")</p>
                    
                </div>

                <!-- Notes -->
                <div class="bg-gray-100 p-4 rounded-lg col-span-1 md:col-span-2">
                    <h3 class="font-semibold text-gray-700">Symptom</h3>
                    <p>@(string.IsNullOrEmpty(appointment.Symptom) ? "No additional notes." : appointment.Symptom)</p>
                </div>
            </div>

            <div class="mt-6 flex justify-end">
                <a asp-action="ViewAppointment" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 font-semibold shadow">
                    Back to Appointments
                </a>
            </div>
        </div>
    }
}