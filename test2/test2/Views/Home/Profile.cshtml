
@{
    Layout = "Layout_login";
    ViewData["Title"] = "Profile";
}

<section class="bg-dashboard">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-4 col-lg-4 col-md-5 col-12">
                <div class="rounded shadow overflow-hidden sticky-bar">
                    <div class="text-center avatar-profile margin-nagative mt-n5 position-relative pb-4 border-bottom">
                        <br><br><br><br>
                        <!-- Nếu là ảnh mặc định thì hiển thị ảnh mặc định -->
                        <img src="~/assets/images/avata.png" class="rounded-circle shadow-md avatar avatar-md-md" alt="">

                        <h5 class="mt-3 mb-1">Nguyễn Văn A</h5>
                        <p class="text-muted mb-0">nguyenvana</p>
                    </div>

                    <ul class="list-unstyled sidebar-nav mb-0">
                        <li class="navbar-item">
                            <a href="user?action=profile" class="navbar-link">
                                <i class="ri-airplay-line align-middle navbar-icon"></i> Dashboard
                            </a>
                        </li>
                        <!-- Kiểm tra vai trò người dùng và hiển thị các mục tương ứng -->
                        <!-- Nếu người dùng là bác sĩ -->
                        <li class="navbar-item">
                            <a href="doctor?action=myfeedback" class="navbar-link">
                                <i class="ri-chat-1-line align-middle navbar-icon"></i> FeedBack
                            </a>
                        </li>
                        <li class="navbar-item">
                            <a href="doctor?action=mypatient" class="navbar-link">
                                <i class="ri-empathize-line align-middle navbar-icon"></i> My Patient
                            </a>
                        </li>
                        <li class="navbar-item">
                            <a href="doctor?action=myappointment" class="navbar-link">
                                <i class="ri-calendar-check-line align-middle navbar-icon"></i> Appointment
                            </a>
                        </li>
                        <!-- Nếu người dùng là bệnh nhân -->
                        <li class="navbar-item">
                            <a href="user?action=history&type=appointment" class="navbar-link">
                                <i class="ri-calendar-check-line align-middle navbar-icon"></i> Appointment History
                            </a>
                        </li>
                        <li class="navbar-item">
                            <a href="user?action=history&type=reservation" class="navbar-link">
                                <i class="ri-calendar-check-line align-middle navbar-icon"></i> Service History
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-xl-8 col-lg-8 col-md-7 mt-4 pt-2 mt-sm-0 pt-sm-0">
                <h3 class="mb-0">Account Information</h3>
                <div class="rounded shadow mt-4">
                    <div class="p-4 border-bottom">
                        <h5 class="mb-0">Personal Information</h5>
                        <p style="color: blue; align-content: center;">Update Successfully</p>
                    </div>
                    <div class="p-4">
                        <form action="/user/update_image" method="POST" enctype="multipart/form-data">
                            <h5 class="mb-0">Update Information :</h5>
                            <div>
                                <p class="text-muted">Update Avatar.</p>
                                <div id="myfileupload">
                                    <input type="file" name="image" id="uploadfile" onchange="readURL(this);" />
                                </div>
                                <div id="thumbbox">
                                    <img class="rounded" height="20%" width="30%" alt="Thumb image" id="thumbimage" style="display: none" />
                                    <a class="removeimg" href="javascript:"></a>
                                </div>
                                <div id="boxchoice">
                                    <a href="javascript:" class="Choicefile"><i class="fas fa-cloud-upload-alt"></i> Upload </a>
                                    <p style="clear:both"></p>
                                    <input type="submit" id="submit" style="display: none" name="send" class="Update btn btn-primary" value="Update">
                                    <p style="clear:both"></p>
                                </div>
                            </div>
                        </form>
                        <form action="/user/updateprofile" method="POST">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">UserName</label>
                                        <input name="username" readonly value="username" id="name" type="text" class="form-control">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Email</label>
                                        <input name="email" readonly value="email@example.com" id="email" type="email" class="form-control">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Full Name</label>
                                        <input name="name" value="Nguyễn Văn A" id="name2" type="text" class="form-control">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Phone Number</label>
                                        <input name="phone" value="0123456789" id="number" type="text" class="form-control">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Gender</label>
                                        <div class="my-3">
                                            <div class="form-check">
                                                <input id="credit" name="gender" value="true" type="radio" class="form-check-input" checked required>
                                                <label class="form-check-label">Male</label>
                                            </div>
                                            <div class="form-check">
                                                <input id="debit" name="gender" value="false" type="radio" class="form-check-input" required>
                                                <label class="form-check-label">Female</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="submit" id="submit" name="send" class="btn btn-primary" value="Save">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="rounded shadow mt-4">
                    <div class="p-4 border-bottom">
                        <h5 class="mb-0">Change Password :</h5>
                        <p style="color: red; align-content: center;">Password Error</p>
                        <p style="color: blue; align-content: center;">Change Password Successfully</p>
                    </div>

                    <div class="p-4">
                        <form action="/user/changepassword" method="POST">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">Old Password :</label>
                                        <input type="password" name="oldpassword" class="form-control" required="">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">New Password :</label>
                                        <input type="password" name="newpassword" class="form-control" required="">
                                    </div>
                                </div>

                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">New Password Again :</label>
                                        <input type="password" name="renewpassword" class="form-control" required="">
                                    </div>
                                </div>

                                <div class="col-lg-12 mt-2 mb-0">
                                    <button class="btn btn-primary">Change</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .Choicefile {
        display: block;
        background: #396CF0;
        border: 1px solid #fff;
        color: #fff;
        width: 150px;
        text-align: center;
        text-decoration: none;
        cursor: pointer;
        padding: 5px 0px;
        border-radius: 5px;
        font-weight: 500;
        align-items: center;
        justify-content: center;
    }

        .Choicefile:hover {
            text-decoration: none;
            color: white;
        }

    #uploadfile,
    .removeimg {
        display: none;
    }

    #thumbbox {
        position: relative;
        width: 100%;
        margin-bottom: 20px;
    }

    .removeimg {
        height: 25px;
        position: absolute;
        background-repeat: no-repeat;
        top: 5px;
        left: 5px;
        background-size: 25px;
        width: 25px;
        border-radius: 50%;
    }

        .removeimg::before {
            content: '';
            border: 1px solid red;
            background: red;
            display: block;
            margin-top: 11px;
            transform: rotate(45deg);
        }

        .removeimg::after {
            content: '';
            background: red;
            border: 1px solid red;
            display: block;
            transform: rotate(-45deg);
            margin-top: -2px;
        }
</style>


<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                document.getElementById('thumbimage').src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            document.getElementById('thumbimage').src = input.value;
        }
        document.getElementById('thumbimage').style.display = 'block';
        document.querySelector('.Choicefile').style.display = 'none';
        document.querySelector('.Update').style.display = 'block';
        document.querySelector('.removeimg').style.display = 'block';
    }
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelector(".Choicefile").addEventListener('click', function () {
            document.getElementById("uploadfile").click();
        });
        document.querySelector(".removeimg").addEventListener('click', function () {
            document.getElementById('thumbimage').src = '';
            document.getElementById('thumbimage').style.display = 'none';
            document.getElementById("uploadfile").value = '';
            document.querySelector('.removeimg').style.display = 'none';
            document.querySelector('.Choicefile').style.display = 'block';
            document.querySelector('.Update').style.display = 'none';
        });
    });
</script>